(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-exam_manage-keer_kesan_pass-add_exam"],{"56c2":function(a,e,t){"use strict";(function(a,r){var n=t("4ea4");t("caad"),t("d3b7"),t("ac1f"),t("2532"),t("466d"),t("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(t("5530")),o=t("c919"),l=a.database();l.command;function u(a){var e={};for(var t in o.validator)a.includes(t)&&(e[t]=o.validator[t]);return e}var s={data:function(){return{value_day:"",value_month:"",value:"",range:[{value:"second",text:"科二"},{value:"third",text:"科三"}],formData:{name:"",kemu:"",mobile:"",month:"",day:"",year:"",data:null,first:null,second:null,third:null},formOptions:{},rules:(0,i.default)({},u(["name","kemu","month_exam","day_exam","year","mobile"]))}},onReady:function(){this.$refs.form.setRules(this.rules)},methods:{dataChange:function(a){this.formData.year=a.split("-")[0],a.split("-")[1]<10?this.formData.month=a.split("-")[1].match(/0(\S*)/)[1]+"月":this.formData.month=a.split("-")[1]+"月",a.split("-")[2]<10?this.formData.day=a.split("-")[2].match(/0(\S*)/)[1]+"号":this.formData.day=a.split("-")[2]+"号"},costPlannedAmountChange:function(a){this.formData.year=a},submit:function(){var a=this;uni.showLoading({mask:!0}),this.$refs.form.submit().then((function(e){a.submitForm()})).catch((function(a){uni.hideLoading()}))},submitForm:function(){"second"==this.value&&a.callFunction({name:"add_exam_second",data:{year:this.formData.year,name:this.formData.name,mobile:this.formData.mobile,exam:this.formData.month+this.formData.day}}).then((function(a){"0"==a.result.updated&&uni.showToast({icon:"error",title:"无此学员"}),"1"==a.result.updated&&(uni.showToast({icon:"success",title:"新增成功"}),setTimeout((function(){return uni.navigateBack()}),1e3))})).finally((function(){uni.hideLoading()})),"third"==this.value&&a.callFunction({name:"add_exam_third",data:{year:this.formData.year,mobile:this.formData.mobile,name:this.formData.name,exam:this.formData.month+this.formData.day}}).then((function(a){"0"==a.result.updated&&uni.showToast({icon:"error",title:"无此学员"}),"1"==a.result.updated&&(r.log(a),uni.showToast({icon:"success",title:"新增成功"}),setTimeout((function(){return uni.navigateBack()}),1e3))})).finally((function(){uni.hideLoading()}))}}};e.default=s}).call(this,t("a9ff")["default"],t("5a52")["default"])},"8f68":function(a,e,t){"use strict";t.d(e,"b",(function(){return n})),t.d(e,"c",(function(){return i})),t.d(e,"a",(function(){return r}));var r={uniForms:t("63a6").default,uniFormsItem:t("08f9").default,uniEasyinput:t("6e17").default,uniDataCheckbox:t("069c").default,dataChange:t("10bf").default},n=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("v-uni-view",{staticClass:"uni-container"},[t("uni-forms",{ref:"form",attrs:{value:a.formData,validateTrigger:"bind"}},[t("uni-forms-item",{attrs:{name:"name",label:"姓名",required:!0}},[t("uni-easyinput",{attrs:{placeholder:"学员姓名",trim:"both"},model:{value:a.formData.name,callback:function(e){a.$set(a.formData,"name",e)},expression:"formData.name"}})],1),t("uni-forms-item",{attrs:{name:"mobile",label:"手机号码",required:!0}},[t("uni-easyinput",{attrs:{placeholder:"手机号码",trim:"both"},model:{value:a.formData.mobile,callback:function(e){a.$set(a.formData,"mobile",e)},expression:"formData.mobile"}})],1),t("uni-forms-item",{attrs:{name:"kemu",label:"科目",required:!0}},[t("uni-data-checkbox",{attrs:{localdata:a.range},model:{value:a.value,callback:function(e){a.value=e},expression:"value"}})],1),t("uni-forms-item",{attrs:{label:"选择日期",required:!0}},[t("dataChange",{attrs:{mode:1},on:{change:function(e){arguments[0]=e=a.$handleEvent(e),a.dataChange(e)}}})],1),t("uni-forms-item",{attrs:{name:"year",label:"考试年份"}},[t("uni-easyinput",{attrs:{placeholder:"考试年份",disabled:!0},model:{value:a.formData.year,callback:function(e){a.$set(a.formData,"year",e)},expression:"formData.year"}})],1),t("uni-forms-item",{attrs:{name:"month_exam",label:"考试月份",required:!0}},[t("uni-easyinput",{attrs:{placeholder:"考试月份",trim:"both",disabled:!0},model:{value:a.formData.month,callback:function(e){a.$set(a.formData,"month",e)},expression:"formData.month"}})],1),t("uni-forms-item",{attrs:{name:"day_exam",label:"考试日期",required:!0}},[t("uni-easyinput",{attrs:{placeholder:"考试号数"},model:{value:a.formData.day,callback:function(e){a.$set(a.formData,"day",e)},expression:"formData.day"}})],1),t("v-uni-view",{staticClass:"uni-button-group"},[t("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=a.$handleEvent(e),a.submit.apply(void 0,arguments)}}},[a._v("提交")]),t("v-uni-navigator",{staticStyle:{"margin-left":"15px"},attrs:{"open-type":"navigateBack"}},[t("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"}},[a._v("返回")])],1)],1)],1)],1)},i=[]},be68:function(a,e,t){"use strict";t.r(e);var r=t("56c2"),n=t.n(r);for(var i in r)"default"!==i&&function(a){t.d(e,a,(function(){return r[a]}))}(i);e["default"]=n.a},c919:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enumConverter=e.validator=void 0;var r={name:{rules:[{required:!0,errorMessage:"{label}必填"},{format:"string"}],label:"姓名"},kemu:{rules:[{required:!0,errorMessage:"{label}必填"},{format:"string"}],label:"科目"},year:{rules:[{required:!0,errorMessage:"{label}必填"},{format:"int"}],label:"年份"},month_exam:{rules:[{required:!0,errorMessage:"{label}必填"},{format:"string"}],label:"月份"},month:{rules:[{required:!0,errorMessage:"{label}必填"},{format:"int"}],label:"月份"},day_exam:{rules:[{required:!0,errorMessage:"{label}必填"},{format:"string"}],label:"日期"},day:{rules:[{required:!0,errorMessage:"{label}必填"},{format:"int"}],label:"日期"},company:{rules:[{required:!0,errorMessage:"{label}必填"},{format:"string"}],label:"驾校"},coach:{rules:[{required:!0,errorMessage:"{label}必填"},{format:"string"}],label:"教练"},card:{rules:[{format:"string"},{pattern:"^\\+?[0-9-]{15,18}$"}],label:"身份证"},mobile:{rules:[{required:!0,errorMessage:"{label}必填"},{format:"string"},{pattern:"^\\+?[0-9-]{11}$"}],label:"手机号码"}};e.validator=r;var n={};e.enumConverter=n},d380:function(a,e,t){"use strict";t.r(e);var r=t("8f68"),n=t("be68");for(var i in n)"default"!==i&&function(a){t.d(e,a,(function(){return n[a]}))}(i);var o,l=t("f0c5"),u=Object(l["a"])(n["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],o);e["default"]=u.exports}}]);