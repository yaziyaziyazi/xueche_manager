(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-system-user-add"],{"288d":function(e,a,t){"use strict";t.d(a,"b",(function(){return r})),t.d(a,"c",(function(){return i})),t.d(a,"a",(function(){return n}));var n={uniForms:t("63a6").default,uniFormsItem:t("08f9").default,uniEasyinput:t("6e17").default,uniDataCheckbox:t("069c").default},r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-uni-view",{staticClass:"uni-container"},[t("uni-forms",{ref:"form",attrs:{rules:e.rules,validateTrigger:"bind"},on:{submit:function(a){arguments[0]=a=e.$handleEvent(a),e.submit.apply(void 0,arguments)}},model:{value:e.formData,callback:function(a){e.formData=a},expression:"formData"}},[t("uni-forms-item",{attrs:{name:"username",label:"用户名",required:!0}},[t("uni-easyinput",{attrs:{clearable:!1,placeholder:"请输入用户名"},model:{value:e.formData.username,callback:function(a){e.$set(e.formData,"username",a)},expression:"formData.username"}})],1),t("uni-forms-item",{attrs:{name:"password",label:"初始密码",required:!0}},[t("uni-easyinput",{attrs:{clearable:!1,placeholder:"请输入初始密码"},model:{value:e.formData.password,callback:function(a){e.$set(e.formData,"password",a)},expression:"formData.password"}})],1),t("uni-forms-item",{attrs:{name:"role",label:"角色列表"}},[t("uni-data-checkbox",{attrs:{multiple:!0,localdata:e.roles},model:{value:e.formData.role,callback:function(a){e.$set(e.formData,"role",a)},expression:"formData.role"}})],1),t("uni-forms-item",{attrs:{name:"mobile",label:"手机号"}},[t("uni-easyinput",{attrs:{clearable:!1,placeholder:"请输入手机号"},model:{value:e.formData.mobile,callback:function(a){e.$set(e.formData,"mobile",a)},expression:"formData.mobile"}})],1),t("uni-forms-item",{attrs:{name:"email",label:"邮箱"}},[t("uni-easyinput",{attrs:{clearable:!1,placeholder:"请输入邮箱"},model:{value:e.formData.email,callback:function(a){e.$set(e.formData,"email",a)},expression:"formData.email"}})],1),t("uni-forms-item",{attrs:{name:"status",label:"是否启用"}},[t("v-uni-switch",{attrs:{checked:e.formData.status},on:{change:function(a){arguments[0]=a=e.$handleEvent(a),e.binddata("status",a.detail.value)}}})],1),t("v-uni-view",{staticClass:"uni-button-group"},[t("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.submitForm.apply(void 0,arguments)}}},[e._v("提交")]),t("v-uni-navigator",{staticStyle:{"margin-left":"15px"},attrs:{"open-type":"navigateBack"}},[t("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"}},[e._v("返回")])],1)],1)],1)],1)},i=[]},3574:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n={username:{rules:[{required:!0,errorMessage:"{label}必填"},{format:"string"},{minLength:2}],label:"用户名"},password:{rules:[{required:!0,errorMessage:"{label}必填"},{format:"string"},{minLength:6}],label:"密码"},mobile:{rules:[{format:"string"},{pattern:"^\\+?[0-9-]{3,20}$"}],label:"手机号"},email:{rules:[{format:"string"},{format:"email"}],label:"邮箱"},role:{rules:[{format:"array"}]}};a.default=n},a26f:function(e,a,t){"use strict";t.r(a);var n=t("c907"),r=t.n(n);for(var i in n)"default"!==i&&function(e){t.d(a,e,(function(){return n[e]}))}(i);a["default"]=r.a},c907:function(e,a,t){"use strict";(function(e){var n=t("4ea4");t("caad"),t("c975"),t("d81d"),t("a9e3"),t("d3b7"),t("2532"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(t("5530")),i=n(t("3574")),o=e.database();o.command;function s(e){var a={};for(var t in i.default)e.includes(t)&&(a[t]=i.default[t]);return a}var l={data:function(){return{formData:{username:"",password:"",role:[],mobile:"",email:"",status:!0},rules:(0,r.default)((0,r.default)({},s(["username","password","role","mobile","email"])),{},{status:{rules:[{format:"bool"}]}}),roles:[]}},onLoad:function(){this.loadroles()},methods:{submitForm:function(){this.$refs.form.submit()},submit:function(e){var a=this,t=e.detail,n=t.value,r=t.errors;r||(uni.showLoading({title:"提交中...",mask:!0}),"boolean"===typeof n.status&&(n.status=Number(!n.status)),this.$request("registerUser",n,{functionName:"uni-id-cf"}).then((function(e){uni.showToast({title:"新增成功"}),a.getOpenerEventChannel().emit("refreshData"),setTimeout((function(){return uni.navigateBack()}),500)})).catch((function(e){uni.showModal({content:e.message||"请求服务失败",showCancel:!1})})).finally((function(e){uni.hideLoading()})))},loadroles:function(){var e=this;o.collection("uni-id-roles").limit(500).get().then((function(a){var t=[];e.roles=a.result.data.map((function(e){return t.push(e.role_id),{value:e.role_id,text:e.role_name}})),-1===t.indexOf("admin")&&e.roles.unshift({value:"admin",text:"超级管理员"})})).catch((function(e){uni.showModal({title:"提示",content:e.message,showCancel:!1})}))}}};a.default=l}).call(this,t("a9ff")["default"])},dc5f:function(e,a,t){"use strict";t.r(a);var n=t("288d"),r=t("a26f");for(var i in r)"default"!==i&&function(e){t.d(a,e,(function(){return r[e]}))}(i);var o,s=t("f0c5"),l=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],o);a["default"]=l.exports}}]);